#include "std/stdref.5th"
#include "src/config.5th"

$str_mem STR_MEM_SIZE

// str buf --- entry_ptr
:push_str {
    dup@ rot
    // buf ptr str
    while dup@c dup {
        2 pick!
        1+ swap 1+ swap
    } drop drop
    0 over!
    1+
    // buf new_ptr
    over@ swap rot!
}