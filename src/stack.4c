#include "std/core.4c"

struct StackHead {
    int len
    NULL data
}

// stack -- len
#stack_len { ->StackHead.len@ }
// stack --
:stack_shrink { ->StackHead.len@-- drop }
// stack slot_size -- slot_ptr
:stack_top {
    over->StackHead.len@
    * + %int+
}
// stack slot_size -- slot_ptr
:stack_last {
    over->StackHead.len@ 1-
    * + %int+
}
// stack slot_size -- slot_ptr
:stack_push {
    over->StackHead.len@++
    * + %int+
}
// idx stack slot_size -- slot_ptr
:stack_get { rot* + %int+ }